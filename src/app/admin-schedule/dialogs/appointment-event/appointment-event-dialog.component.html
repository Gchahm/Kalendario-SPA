<div class="event-container">
  <button mat-stroked-button class="close-btn" color="warn" (click)="close()">
    <mat-icon>close</mat-icon>
  </button>

  <ng-container *ngIf="appointment">
    <ng-container *ngIf="!editMode">
      <table class="table table-borderless">
        <tr>
          <th>service:</th>
          <td>{{appointment.service.name}}</td>
        </tr>
        <tr>
          <th>date:</th>
          <td>{{appointment.start.format('DD/MM/YYYY')}}</td>
        </tr>
        <tr>
          <th>time:</th>
          <td>{{appointment.start.format('HH:mm')}} - {{appointment.end.format('HH:mm')}}</td>
        </tr>
        <tr>
          <th>customer:</th>
          <td>{{appointment.customer.name}}</td>
        </tr>
        <tr>
          <th>phone:</th>
          <td>{{appointment.customer.phone}}</td>
        </tr>
        <tr>
          <th>notes:</th>
          <td>{{appointment.customerNotes}}</td>
        </tr>
      </table>
      <button mat-raised-button color="primary" (click)="edit()">edit</button>
      <button mat-flat-button color="warn" (click)="delete()">delete</button>
    </ng-container>
    <ng-container *ngIf="editMode">
      <form *ngIf="onUpdateEvent.model as form" #appointmentForm="ngForm">

        <mat-form-field>
          <input matInput placeholder="Customer (disabled)" disabled value="{{appointment.customer.name}}">
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="Service (disabled)" disabled value="{{appointment.service.name}}">
        </mat-form-field>

        <mat-form-field>
          <input [(ngModel)]="start.date"
                 matInput
                 [matDatepicker]="picker"
                 placeholder="Choose a date"
                 name="startDate"
                 #startDate="ngModel"
                 required>
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
          <mat-error>
            Please enter a date
          </mat-error>
        </mat-form-field>

        <mat-form-field>
          <input [(ngModel)]="start.time"
                 name="startTime"
                 matInput
                 #startTime="ngModel"
                 type="time"
                 required>
          <mat-error>
            Please enter a time
          </mat-error>
        </mat-form-field>

        <button type="submit"
                color="primary"
                mat-flat-button
                (click)="save()"
                [disabled]="!appointmentForm.valid">
          book appointment
        </button>
        <button mat-stroked-button color="warn" (click)="cancel()">cancel</button>
      </form>


    </ng-container>
  </ng-container>


  <ng-container *ngIf="selfAppointment">
    <table class="table table-borderless">
      <tr>
        <th>from:</th>
        <td>{{selfAppointment.start.format('HH:mm')}}</td>
      </tr>
      <tr>
        <th>to:</th>
        <td>{{selfAppointment.end.format('HH:mm')}}</td>
      </tr>
      <tr>
        <th>notes:</th>
        <td>{{selfAppointment.reason}}</td>
      </tr>
    </table>
  </ng-container>
</div>
